---
title: "최단 경로 찾기 알고리즘(1) - 다익스트라(Dijkstra)"
categories:
  - algorithm
tags:
  - graph
  - shortest path
permalink: /computer_science/:title
---
<br>

# 최단 경로 알고리즘

알고리즘 문제를 풀다보면 빈번히 나오는 유형 중 하나가 바로 최단 경로 찾기입니다.

최단경로 찾기 알고리즘 중 대표적으로 쓰이는 세 알고리즘은 다익스트라(Dijkstra) 알고리즘, 벨만 포드(Bellman Ford) 알고리즘, 그리고 플로이드 와샬(Floyd Warshall) 알고리즘 입니다.
<br>
<br>
<br>
<br>

# 다익스트라 알고리즘

네비게이션 길 찾기 등 실제 자주 사용되는 다익스트라 알고리즘은 한 정점으로부터 다른 모든 정점까지의 최단 경로를 찾는 알고리즘입니다.

값이 음수인 간선이 존재해서는 안됩니다. (음수가 있다면 벨만 포드 알고리즘을 사용해야 합니다.)

다익스트라 알고리즘의 가장 핵심적인 내용은 다음과 같습니다.

> S: 원점\
> N, M: 어떤 연결된 두 노드
>
> 현재 밝혀진 S -> N으로 가는 가장 짧은 경로보다\
> S -> M으로 가는 가장 짧은 경로 더하기\
> M에서 N으로 가는 경로의 길이가 더 짧으면\
> S -> N으로 가는 가장 짧은 길은 S -> M -> N 이 되는 것입니다.

```
if ((S -> M) + (M -> N) < S -> N):
    S -> N = S -> M -> N
```

최대한 이해가 잘 되도록 써보려 노력했지만 난해한 느낌이네요^^;
<br>
<br>
<br>
<br>

# 시간복잡도

현재 노드까지로의 최소 거리를 구하고 다음 노드로 넘어갈 때, 다음 노드를 선정하는 기준은 아래와 같습니다.

    1. 아직 방문하지 않은 노드
    2. 방문된 노드들에 연결된 간선 중 가중치가 가장 작은 간선에 연결되어있는 노드

<br>

<details>
<summary>가중치가 가장 작은 간선을 선택하는 이유</summary>
<div markdown="1">

가중치가 가장 작은 간선을 찾는데 O(V)를 써버리니 왜 가장 작은 가중치를 찾는가 궁금해졌습니다.

물론 제가 수학적 증명을 할 수는 없으니 검색을 해보았습니다^^*

[여기 저랑 똑같은 의문을 가진 사람이 약 11년전 질문글을 stack overflow에 올렸었네요 ^^*](https://stackoverflow.com/questions/2856670/why-does-dijkstras-algorithm-work)

이유는 간단하고 당연했습니다.

다익스트라 알고리즘은 최단 경로를 찾는 알고리즘입니다.

어떤 정점 N으로 가는 간선 중 최단 길이가 아닌 다른 간선을 택한다면, 이후 해당 정점 N을 거치는 모든 경로는 최단 거리가 될 수 없습니다.


</div>
</details>
<br>
<br>

## 인접 행렬로 구현된 그래프

모든 노드를 방문하는 O(V),

매 방문마다 모든 가능한 간선을 확인하여 가중치가 가장 작은 값을 찾는 O(V),

총 O(V^2)
<br>
<br>

## 인접 리스트로 구현된 그래프

모든 노드를 방문하는 O(V),

매 방문마다 모든 간선을 확인하여 가중치가 가장 작은 값을 찾는 O(E),

총 O(V * E)의 복잡도가 될 것입니다.
<br>
<br>
<br>

## 최소 힙을 사용한 알고리즘

여기서 한차례 더 시간복잡도를 낮출 수 있는데 바로 최소 힙을 사용하는 방법입니다.
<br>

매 방문마다 최소값을 확인하는 O(V) 혹은 O(E)를 줄일 수 있게 됩니다.

모든 노드를 방문하는 것은 마찬가지로 O(V),

한 방문마다 연결된 간선을 최소 힙에 삽입할 것이므로 삽입에 O(MlogE),\
(M은 해당 노드에 연결된 간선의 수, (M(1) + M(2) + ... + M(V)) = E)

즉 싸이클은 총 V번 돌고 매 싸이클마다 최소 힙으로의 삽입을 M번씩 하지만 결국엔 삽입을 고정된 E번 하므로

O(V) + O(ElogE) = O(V + ElogE)의 복잡도가 될 것입니다.

보통의 경우에는 간선의 수가 정점의 수보다 많으므로 O(ElogV)라고 생각하면 되고

정점은 많지만 정점 사이가 많이 연결되지 않은 경우는 O(VlogV)라고 보면 될 것 같습니다.
<br>
<br>

~~인접행렬에서 최소 힙을 사용한다면 V번의 싸이클 내에서 V번의 삽입이 이루어질 것이므로 O(V^2logE)의 복잡도를 가지게 될 것입니다.~~
<br>
<br>
<br>

## 정리
<br>

| Time Complexity |    인접 행렬   |    인접리스트   |
|:---------------:|:------------:|:------------:|
|   일반 이중 루프    |    O(V^2)   |     O(VE)    |
|     최소 힙       |~~O(V^2logE)~~| O(V + ElogE) |

`V : 간선의 수`\
`E : 노드의 수`
<br>
<br>
<br>
<br>

# 사용 가능한 조건

다익스트라 알고리즘을 사용할 수 있는 그래프는 아래 세 조건을 만족해야 합니다.

1. 유향 그래프이어야 한다. (Directed)
2. 비순환 그래프이어야 한다. (Acyclic)
3. 음수 가중치를 가지는 간선이 있어서는 안된다.